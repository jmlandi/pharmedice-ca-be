# API de Gerenciamento de Usu√°rios - Administradores

## üìã Vis√£o Geral

Esta documenta√ß√£o descreve as rotas e funcionalidades da API para gerenciamento de usu√°rios, **exclusivas para administradores**. Todas as rotas descritas aqui requerem:

1. **Autentica√ß√£o JWT** (`Bearer Token`)
2. **Permiss√£o de Administrador** (`tipo_usuario: 'administrador'`)

---

## üîê Autentica√ß√£o

Todas as requisi√ß√µes devem incluir o header de autentica√ß√£o:

```http
Authorization: Bearer {seu_token_jwt}
```

### Verifica√ß√£o de Permiss√µes

O middleware `AdminMiddleware` verifica automaticamente:
- Se o token JWT √© v√°lido
- Se o usu√°rio autenticado tem `tipo_usuario === 'administrador'`

**Resposta de erro (403) se n√£o for admin:**
```json
{
  "sucesso": false,
  "mensagem": "Acesso negado. Apenas administradores podem acessar este recurso."
}
```

---

## üìç Base URL

```
{API_URL}/api/usuarios
```

> **Nota:** Todas as URLs abaixo s√£o relativas √† base URL.

---

## üîç 1. Listar Usu√°rios (com Filtros e Pagina√ß√£o)

Lista todos os usu√°rios ativos do sistema com suporte a filtros e pagina√ß√£o.

### Request

```http
GET /api/usuarios
```

### Query Parameters (Opcionais)

| Par√¢metro | Tipo | Descri√ß√£o | Exemplo |
|-----------|------|-----------|---------|
| `per_page` | integer | Quantidade de registros por p√°gina | `15` (padr√£o) |
| `page` | integer | N√∫mero da p√°gina | `1` (padr√£o) |
| `tipo_usuario` | string | Filtra por tipo de usu√°rio | `administrador` ou `usuario` |
| `email` | string | Busca parcial por email | `joao@email.com` |
| `nome` | string | Busca parcial por nome (primeiro, segundo ou apelido) | `Jo√£o Silva` |

### Exemplos de Requisi√ß√£o

**Listagem b√°sica (p√°gina 1, 15 itens):**
```bash
GET /api/usuarios
```

**Listagem com 25 itens por p√°gina:**
```bash
GET /api/usuarios?per_page=25
```

**Filtrar apenas clientes:**
```bash
GET /api/usuarios?tipo_usuario=usuario
```

**Buscar por email:**
```bash
GET /api/usuarios?email=joao@email.com
```

**Buscar por nome:**
```bash
GET /api/usuarios?nome=Jo√£o
```

**Combinando filtros:**
```bash
GET /api/usuarios?tipo_usuario=usuario&nome=Silva&per_page=20&page=2
```

### Response (200 OK)

```json
{
  "sucesso": true,
  "dados": {
    "current_page": 1,
    "data": [
      {
        "id": "01HQXYZ1234567890ABCDEFGH",
        "primeiro_nome": "Jo√£o",
        "segundo_nome": "Silva",
        "apelido": "Jo√£o",
        "email": "joao.silva@email.com",
        "telefone": "(11) 98765-4321",
        "numero_documento": "123.456.789-00",
        "data_nascimento": "1990-05-15",
        "tipo_usuario": "usuario",
        "aceite_comunicacoes_email": true,
        "aceite_comunicacoes_sms": false,
        "aceite_comunicacoes_whatsapp": true,
        "ativo": true,
        "email_verified_at": "2025-01-15T10:30:00.000000Z",
        "avatar": null,
        "provider": null,
        "google_id": null,
        "created_at": "2025-01-15T10:25:00.000000Z",
        "updated_at": "2025-01-15T10:30:00.000000Z"
      },
      // ... mais usu√°rios
    ],
    "first_page_url": "http://localhost:8000/api/usuarios?page=1",
    "from": 1,
    "last_page": 5,
    "last_page_url": "http://localhost:8000/api/usuarios?page=5",
    "links": [
      {
        "url": null,
        "label": "&laquo; Previous",
        "active": false
      },
      {
        "url": "http://localhost:8000/api/usuarios?page=1",
        "label": "1",
        "active": true
      },
      // ... mais links
    ],
    "next_page_url": "http://localhost:8000/api/usuarios?page=2",
    "path": "http://localhost:8000/api/usuarios",
    "per_page": 15,
    "prev_page_url": null,
    "to": 15,
    "total": 73
  }
}
```

### Campos do Usu√°rio

| Campo | Tipo | Descri√ß√£o |
|-------|------|-----------|
| `id` | string (ULID) | Identificador √∫nico do usu√°rio |
| `primeiro_nome` | string | Primeiro nome |
| `segundo_nome` | string\|null | Segundo nome (pode ser nulo) |
| `apelido` | string | Nome de exibi√ß√£o/apelido |
| `email` | string | Email (√∫nico no sistema) |
| `telefone` | string | Telefone de contato |
| `numero_documento` | string | CPF ou outro documento (√∫nico) |
| `data_nascimento` | date | Data de nascimento (formato: YYYY-MM-DD) |
| `tipo_usuario` | string | `administrador` ou `usuario` |
| `aceite_comunicacoes_email` | boolean | Aceita receber emails |
| `aceite_comunicacoes_sms` | boolean | Aceita receber SMS |
| `aceite_comunicacoes_whatsapp` | boolean | Aceita receber mensagens no WhatsApp |
| `ativo` | boolean | Status do usu√°rio (apenas ativos s√£o listados) |
| `email_verified_at` | datetime\|null | Data/hora da verifica√ß√£o do email |
| `avatar` | string\|null | URL do avatar (quando login social) |
| `provider` | string\|null | Provedor de autentica√ß√£o (`google`, etc) |
| `google_id` | string\|null | ID do Google (se login social) |
| `created_at` | datetime | Data de cria√ß√£o |
| `updated_at` | datetime | Data da √∫ltima atualiza√ß√£o |

---

## üë§ 2. Visualizar Usu√°rio Espec√≠fico

Busca os detalhes completos de um usu√°rio pelo ID.

### Request

```http
GET /api/usuarios/{id}
```

### Path Parameters

| Par√¢metro | Tipo | Descri√ß√£o |
|-----------|------|-----------|
| `id` | string (ULID) | ID do usu√°rio |

### Exemplo de Requisi√ß√£o

```bash
GET /api/usuarios/01HQXYZ1234567890ABCDEFGH
```

### Response (200 OK)

```json
{
  "sucesso": true,
  "dados": {
    "id": "01HQXYZ1234567890ABCDEFGH",
    "primeiro_nome": "Jo√£o",
    "segundo_nome": "Silva",
    "apelido": "Jo√£o",
    "email": "joao.silva@email.com",
    "telefone": "(11) 98765-4321",
    "numero_documento": "123.456.789-00",
    "data_nascimento": "1990-05-15",
    "tipo_usuario": "usuario",
    "aceite_comunicacoes_email": true,
    "aceite_comunicacoes_sms": false,
    "aceite_comunicacoes_whatsapp": true,
    "ativo": true,
    "email_verified_at": "2025-01-15T10:30:00.000000Z",
    "avatar": null,
    "provider": null,
    "google_id": null,
    "created_at": "2025-01-15T10:25:00.000000Z",
    "updated_at": "2025-01-15T10:30:00.000000Z"
  }
}
```

### Response (404 Not Found)

```json
{
  "sucesso": false,
  "mensagem": "Usu√°rio n√£o encontrado"
}
```

---

## ‚ûï 3. Criar Novo Usu√°rio

Cria um novo usu√°rio no sistema (apenas administradores).

### Request

```http
POST /api/usuarios
Content-Type: application/json
```

### Body Parameters

| Campo | Tipo | Obrigat√≥rio | Descri√ß√£o | Valida√ß√£o |
|-------|------|-------------|-----------|-----------|
| `primeiro_nome` | string | ‚úÖ Sim | Primeiro nome | M√°x. 255 caracteres |
| `segundo_nome` | string | ‚úÖ Sim | Segundo nome | M√°x. 255 caracteres |
| `apelido` | string | ‚úÖ Sim | Nome de exibi√ß√£o | M√°x. 255 caracteres |
| `email` | string | ‚úÖ Sim | Email | Formato v√°lido, √∫nico no sistema |
| `senha` | string | ‚úÖ Sim | Senha | M√≠nimo 6 caracteres |
| `telefone` | string | ‚úÖ Sim | Telefone | M√°x. 20 caracteres |
| `numero_documento` | string | ‚úÖ Sim | CPF ou documento | M√°x. 20 caracteres, √∫nico |
| `data_nascimento` | date | ‚úÖ Sim | Data de nascimento | Formato: YYYY-MM-DD |
| `tipo_usuario` | string | ‚ùå N√£o | Tipo de usu√°rio | `administrador` ou `usuario` (padr√£o: `usuario`) |
| `aceite_comunicacoes_email` | boolean | ‚ùå N√£o | Aceite emails | Padr√£o: `false` |
| `aceite_comunicacoes_sms` | boolean | ‚ùå N√£o | Aceite SMS | Padr√£o: `false` |
| `aceite_comunicacoes_whatsapp` | boolean | ‚ùå N√£o | Aceite WhatsApp | Padr√£o: `false` |

### Exemplo de Requisi√ß√£o

```json
{
  "primeiro_nome": "Maria",
  "segundo_nome": "Santos",
  "apelido": "Maria",
  "email": "maria.santos@email.com",
  "senha": "senha123456",
  "telefone": "(11) 91234-5678",
  "numero_documento": "987.654.321-00",
  "data_nascimento": "1995-08-20",
  "tipo_usuario": "usuario",
  "aceite_comunicacoes_email": true,
  "aceite_comunicacoes_sms": false,
  "aceite_comunicacoes_whatsapp": true
}
```

### Response (201 Created)

```json
{
  "sucesso": true,
  "mensagem": "Usu√°rio criado com sucesso",
  "dados": {
    "id": "01HQABC9876543210XYZDEFGH",
    "primeiro_nome": "Maria",
    "segundo_nome": "Santos",
    "apelido": "Maria",
    "email": "maria.santos@email.com",
    "telefone": "(11) 91234-5678",
    "numero_documento": "987.654.321-00",
    "data_nascimento": "1995-08-20",
    "tipo_usuario": "usuario",
    "aceite_comunicacoes_email": true,
    "aceite_comunicacoes_sms": false,
    "aceite_comunicacoes_whatsapp": true,
    "ativo": true,
    "email_verified_at": null,
    "created_at": "2025-01-20T15:30:00.000000Z",
    "updated_at": "2025-01-20T15:30:00.000000Z"
  }
}
```

### Response (422 Unprocessable Entity) - Erro de Valida√ß√£o

```json
{
  "sucesso": false,
  "mensagem": "Dados inv√°lidos",
  "erros": {
    "email": [
      "Email j√° cadastrado"
    ],
    "senha": [
      "Senha deve ter no m√≠nimo 6 caracteres"
    ],
    "numero_documento": [
      "N√∫mero do documento j√° cadastrado"
    ]
  }
}
```

---

## ‚úèÔ∏è 4. Atualizar Usu√°rio

Atualiza os dados de um usu√°rio existente (apenas administradores).

### Request

```http
PUT /api/usuarios/{id}
Content-Type: application/json
```

### Path Parameters

| Par√¢metro | Tipo | Descri√ß√£o |
|-----------|------|-----------|
| `id` | string (ULID) | ID do usu√°rio a ser atualizado |

### Body Parameters

> **Nota:** Todos os campos s√£o **opcionais** na atualiza√ß√£o. Envie apenas os campos que deseja modificar.

| Campo | Tipo | Descri√ß√£o | Valida√ß√£o |
|-------|------|-----------|-----------|
| `primeiro_nome` | string | Primeiro nome | M√°x. 255 caracteres |
| `segundo_nome` | string | Segundo nome | M√°x. 255 caracteres |
| `apelido` | string | Nome de exibi√ß√£o | M√°x. 255 caracteres |
| `email` | string | Email | Formato v√°lido, √∫nico (exceto para o pr√≥prio usu√°rio) |
| `senha` | string | Nova senha | M√≠nimo 6 caracteres |
| `telefone` | string | Telefone | M√°x. 20 caracteres |
| `numero_documento` | string | CPF ou documento | M√°x. 20 caracteres, √∫nico (exceto para o pr√≥prio usu√°rio) |
| `data_nascimento` | date | Data de nascimento | Formato: YYYY-MM-DD |
| `tipo_usuario` | string | Tipo de usu√°rio | `administrador` ou `usuario` |
| `aceite_comunicacoes_email` | boolean | Aceite emails | `true` ou `false` |
| `aceite_comunicacoes_sms` | boolean | Aceite SMS | `true` ou `false` |
| `aceite_comunicacoes_whatsapp` | boolean | Aceite WhatsApp | `true` ou `false` |

### Exemplos de Requisi√ß√£o

**Atualizar apenas email e telefone:**
```json
{
  "email": "novo.email@email.com",
  "telefone": "(11) 99999-8888"
}
```

**Atualizar tipo de usu√°rio para administrador:**
```json
{
  "tipo_usuario": "administrador"
}
```

**Atualizar m√∫ltiplos campos:**
```json
{
  "primeiro_nome": "Jo√£o Pedro",
  "apelido": "JP",
  "telefone": "(11) 98888-7777",
  "aceite_comunicacoes_whatsapp": false
}
```

**Redefinir senha do usu√°rio:**
```json
{
  "senha": "novaSenhaSegura123"
}
```

### Response (200 OK)

```json
{
  "sucesso": true,
  "mensagem": "Usu√°rio atualizado com sucesso",
  "dados": {
    "id": "01HQXYZ1234567890ABCDEFGH",
    "primeiro_nome": "Jo√£o Pedro",
    "segundo_nome": "Silva",
    "apelido": "JP",
    "email": "novo.email@email.com",
    "telefone": "(11) 98888-7777",
    "numero_documento": "123.456.789-00",
    "data_nascimento": "1990-05-15",
    "tipo_usuario": "usuario",
    "aceite_comunicacoes_email": true,
    "aceite_comunicacoes_sms": false,
    "aceite_comunicacoes_whatsapp": false,
    "ativo": true,
    "email_verified_at": "2025-01-15T10:30:00.000000Z",
    "created_at": "2025-01-15T10:25:00.000000Z",
    "updated_at": "2025-01-20T16:45:00.000000Z"
  }
}
```

### Response (404 Not Found)

```json
{
  "sucesso": false,
  "mensagem": "Usu√°rio n√£o encontrado"
}
```

### Response (422 Unprocessable Entity)

```json
{
  "sucesso": false,
  "mensagem": "Dados inv√°lidos",
  "erros": {
    "email": [
      "Email j√° cadastrado"
    ]
  }
}
```

---

## üóëÔ∏è 5. Remover Usu√°rio (Soft Delete)

Remove um usu√°rio do sistema (soft delete - apenas marca como inativo).

### Request

```http
DELETE /api/usuarios/{id}
```

### Path Parameters

| Par√¢metro | Tipo | Descri√ß√£o |
|-----------|------|-----------|
| `id` | string (ULID) | ID do usu√°rio a ser removido |

### Exemplo de Requisi√ß√£o

```bash
DELETE /api/usuarios/01HQXYZ1234567890ABCDEFGH
```

### Response (200 OK)

```json
{
  "sucesso": true,
  "mensagem": "Usu√°rio removido com sucesso"
}
```

### Response (404 Not Found)

```json
{
  "sucesso": false,
  "mensagem": "Usu√°rio n√£o encontrado"
}
```

### ‚ö†Ô∏è Importante sobre Remo√ß√£o

- A remo√ß√£o √© **soft delete**: o usu√°rio n√£o √© deletado do banco, apenas marcado como `ativo: false`
- Usu√°rios inativos **n√£o aparecem** nas listagens
- O usu√°rio **n√£o consegue mais fazer login** ap√≥s ser removido
- O email e documento do usu√°rio removido **continuam reservados** (n√£o podem ser reutilizados)

---

## üîí Rota Dispon√≠vel para Todos os Usu√°rios Autenticados

### Alterar Pr√≥pria Senha

Permite que **qualquer usu√°rio autenticado** (admin ou n√£o) altere sua pr√≥pria senha.

#### Request

```http
PUT /api/usuarios/alterar-senha
Content-Type: application/json
```

#### Body Parameters

| Campo | Tipo | Obrigat√≥rio | Descri√ß√£o | Valida√ß√£o |
|-------|------|-------------|-----------|-----------|
| `senha_atual` | string | ‚úÖ Sim | Senha atual do usu√°rio | - |
| `nova_senha` | string | ‚úÖ Sim | Nova senha | M√≠nimo 6 caracteres |
| `nova_senha_confirmation` | string | ‚úÖ Sim | Confirma√ß√£o da nova senha | Deve ser igual a `nova_senha` |

#### Exemplo de Requisi√ß√£o

```json
{
  "senha_atual": "minhasenhaantiga123",
  "nova_senha": "minhanovasenha456",
  "nova_senha_confirmation": "minhanovasenha456"
}
```

#### Response (200 OK)

```json
{
  "sucesso": true,
  "mensagem": "Senha alterada com sucesso"
}
```

#### Response (400 Bad Request) - Senha Atual Incorreta

```json
{
  "sucesso": false,
  "mensagem": "Senha atual incorreta"
}
```

#### Response (422 Unprocessable Entity) - Valida√ß√£o

```json
{
  "sucesso": false,
  "mensagem": "Dados inv√°lidos",
  "erros": {
    "nova_senha": [
      "Nova senha deve ter no m√≠nimo 6 caracteres",
      "Confirma√ß√£o da senha n√£o confere"
    ]
  }
}
```

---

## üéØ Casos de Uso - Implementa√ß√£o no Front-end

### 1Ô∏è‚É£ Tela de Listagem de Usu√°rios

**Funcionalidades:**
- Tabela paginada com todos os usu√°rios
- Filtros por: tipo de usu√°rio, email, nome
- Seletor de quantidade de itens por p√°gina (10, 15, 25, 50)
- Bot√µes de a√ß√£o: Visualizar, Editar, Remover
- Badge visual para tipo de usu√°rio (admin/cliente)
- Indicador de email verificado
- Busca em tempo real (debounced)

**Exemplo de implementa√ß√£o React:**

```javascript
// Componente de listagem
const [users, setUsers] = useState([]);
const [loading, setLoading] = useState(false);
const [pagination, setPagination] = useState({
  currentPage: 1,
  perPage: 15,
  total: 0
});
const [filters, setFilters] = useState({
  tipo_usuario: '',
  email: '',
  nome: ''
});

const fetchUsers = async (page = 1) => {
  setLoading(true);
  try {
    const queryParams = new URLSearchParams({
      page,
      per_page: pagination.perPage,
      ...filters
    });
    
    const response = await api.get(`/usuarios?${queryParams}`, {
      headers: {
        'Authorization': `Bearer ${token}`
      }
    });
    
    if (response.data.sucesso) {
      setUsers(response.data.dados.data);
      setPagination({
        currentPage: response.data.dados.current_page,
        perPage: response.data.dados.per_page,
        total: response.data.dados.total,
        lastPage: response.data.dados.last_page
      });
    }
  } catch (error) {
    console.error('Erro ao buscar usu√°rios:', error);
    // Tratar erro (mostrar toast/notifica√ß√£o)
  } finally {
    setLoading(false);
  }
};

useEffect(() => {
  fetchUsers();
}, [filters, pagination.perPage]);
```

### 2Ô∏è‚É£ Tela de Visualiza√ß√£o de Usu√°rio

**Funcionalidades:**
- Exibir todos os dados do usu√°rio em formato readonly
- Bot√£o para editar
- Indicadores visuais para prefer√™ncias de comunica√ß√£o
- Badge de status (ativo/inativo, email verificado)

### 3Ô∏è‚É£ Tela de Cria√ß√£o de Usu√°rio

**Funcionalidades:**
- Formul√°rio completo com valida√ß√£o
- Campos obrigat√≥rios claramente indicados
- M√°scara para CPF e telefone
- Seletor de tipo de usu√°rio
- Checkboxes para prefer√™ncias de comunica√ß√£o
- Feedback visual de erros de valida√ß√£o

**Valida√ß√µes no front-end:**
- Primeiro nome: obrigat√≥rio, m√°x 255 caracteres
- Segundo nome: obrigat√≥rio, m√°x 255 caracteres
- Email: obrigat√≥rio, formato v√°lido
- Senha: obrigat√≥rio, m√≠nimo 6 caracteres
- Telefone: obrigat√≥rio, formato v√°lido
- CPF: obrigat√≥rio, formato v√°lido
- Data de nascimento: obrigat√≥rio, data v√°lida, idade m√≠nima

### 4Ô∏è‚É£ Tela de Edi√ß√£o de Usu√°rio

**Funcionalidades:**
- Formul√°rio pr√©-preenchido com dados atuais
- Todos os campos edit√°veis (exceto ID)
- Campo de senha opcional (vazio = n√£o alterar)
- Op√ß√£o de promover/rebaixar entre admin e usu√°rio
- Confirma√ß√£o antes de salvar altera√ß√µes cr√≠ticas
- Feedback visual de campos alterados

**Exemplo de implementa√ß√£o:**

```javascript
const [formData, setFormData] = useState({
  primeiro_nome: '',
  segundo_nome: '',
  apelido: '',
  email: '',
  telefone: '',
  numero_documento: '',
  data_nascimento: '',
  tipo_usuario: 'usuario',
  // ... outros campos
});

const handleUpdate = async (userId) => {
  try {
    const response = await api.put(`/usuarios/${userId}`, formData, {
      headers: {
        'Authorization': `Bearer ${token}`,
        'Content-Type': 'application/json'
      }
    });
    
    if (response.data.sucesso) {
      // Sucesso - mostrar mensagem e redirecionar
      toast.success('Usu√°rio atualizado com sucesso!');
      navigate('/admin/usuarios');
    }
  } catch (error) {
    if (error.response?.status === 422) {
      // Erros de valida√ß√£o
      const erros = error.response.data.erros;
      // Mostrar erros no formul√°rio
    } else {
      toast.error('Erro ao atualizar usu√°rio');
    }
  }
};
```

### 5Ô∏è‚É£ Modal de Confirma√ß√£o de Remo√ß√£o

**Funcionalidades:**
- Modal de confirma√ß√£o com informa√ß√µes do usu√°rio
- Alerta sobre consequ√™ncias da remo√ß√£o
- Bot√µes de cancelar e confirmar
- Loading state durante a opera√ß√£o

```javascript
const handleDelete = async (userId, userName) => {
  const confirmed = await showConfirmDialog({
    title: 'Remover Usu√°rio',
    message: `Tem certeza que deseja remover o usu√°rio "${userName}"? Esta a√ß√£o marcar√° o usu√°rio como inativo e ele n√£o poder√° mais acessar o sistema.`,
    confirmText: 'Sim, remover',
    cancelText: 'Cancelar',
    type: 'danger'
  });
  
  if (confirmed) {
    try {
      const response = await api.delete(`/usuarios/${userId}`, {
        headers: {
          'Authorization': `Bearer ${token}`
        }
      });
      
      if (response.data.sucesso) {
        toast.success('Usu√°rio removido com sucesso!');
        fetchUsers(); // Recarregar lista
      }
    } catch (error) {
      toast.error('Erro ao remover usu√°rio');
    }
  }
};
```

---

## üõ°Ô∏è Tratamento de Erros

### C√≥digos de Status HTTP

| C√≥digo | Significado | Quando Ocorre |
|--------|-------------|---------------|
| `200` | OK | Opera√ß√£o bem-sucedida (GET, PUT, DELETE) |
| `201` | Created | Usu√°rio criado com sucesso |
| `400` | Bad Request | Dados inv√°lidos ou l√≥gica de neg√≥cio violada |
| `401` | Unauthorized | Token inv√°lido ou expirado |
| `403` | Forbidden | Usu√°rio n√£o tem permiss√£o de admin |
| `404` | Not Found | Usu√°rio n√£o encontrado |
| `422` | Unprocessable Entity | Erros de valida√ß√£o |
| `500` | Internal Server Error | Erro no servidor |

### Estrutura de Resposta de Erro

```json
{
  "sucesso": false,
  "mensagem": "Descri√ß√£o do erro",
  "erros": {
    "campo": [
      "Mensagem de erro espec√≠fica"
    ]
  }
}
```

### Recomenda√ß√µes de Tratamento

1. **401 Unauthorized**: Redirecionar para login
2. **403 Forbidden**: Mostrar mensagem "Acesso negado" e redirecionar
3. **422 Validation**: Mostrar erros nos campos espec√≠ficos do formul√°rio
4. **500 Server Error**: Mostrar mensagem gen√©rica e tentar novamente

---

## üìä Exemplo de Fluxo Completo

### Fluxo: Admin cria novo usu√°rio cliente

```mermaid
sequenceDiagram
    participant F as Frontend (Admin)
    participant A as API
    participant D as Database

    F->>A: POST /api/usuarios (dados do novo usu√°rio)
    A->>A: Valida permiss√£o de admin
    A->>A: Valida dados do formul√°rio
    A->>D: Verifica email √∫nico
    A->>D: Verifica documento √∫nico
    A->>D: Cria novo usu√°rio
    D->>A: Usu√°rio criado
    A->>F: 201 Created (dados do usu√°rio)
    F->>F: Mostra mensagem de sucesso
    F->>F: Redireciona para listagem
```

---

## üîÑ Versionamento

**Vers√£o atual:** 1.0.0  
**√öltima atualiza√ß√£o:** 24 de outubro de 2025

---

## üìù Notas Importantes

### ‚ö†Ô∏è Seguran√ßa

1. **Nunca armazene senhas em plain text** - a API j√° faz hash automaticamente
2. **Token JWT deve ser armazenado com seguran√ßa** (httpOnly cookies ou localStorage com cuidado)
3. **Sempre valide permiss√µes no front-end** antes de mostrar op√ß√µes de admin
4. **Implemente rate limiting** para prevenir ataques de for√ßa bruta

### üí° Boas Pr√°ticas

1. **Use debounce** em campos de busca para evitar muitas requisi√ß√µes
2. **Implemente loading states** em todas as opera√ß√µes ass√≠ncronas
3. **Cache a lista de usu√°rios** quando apropriado
4. **Mostre feedback visual** para todas as a√ß√µes (toast, snackbar, etc)
5. **Implemente pagina√ß√£o infinita** ou "load more" para melhor UX
6. **Valide dados no front-end** antes de enviar para a API

### üé® Sugest√µes de UX/UI

1. **Tabela responsiva** com scroll horizontal em mobile
2. **Filtros colaps√°veis** para economizar espa√ßo
3. **Skeleton loaders** enquanto carrega dados
4. **Empty states** quando n√£o h√° usu√°rios
5. **Badges coloridos** para tipos de usu√°rio e status
6. **√çcones intuitivos** para a√ß√µes (editar, remover, visualizar)
7. **Confirma√ß√£o em a√ß√µes destrutivas** (remover usu√°rio)
8. **Breadcrumbs** para navega√ß√£o clara

---

## üÜò Suporte

Para d√∫vidas ou problemas com a API, entre em contato com a equipe de desenvolvimento.

**Logs dispon√≠veis em:**
- `storage/logs/laravel.log`

**Prefixo dos logs:**
- `UsuarioController::` para logs do controller
- `UsuarioService::` para logs do service

---

## üìö Recursos Adicionais

- [Documenta√ß√£o completa da API](./README.md)
- [Guia de autentica√ß√£o](./authentication.md)
- [Estrutura do projeto](./concepts/README.md)

---

**¬© 2025 Pharmedice - Customer Area API**
